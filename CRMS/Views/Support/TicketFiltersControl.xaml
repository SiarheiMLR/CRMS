<UserControl x:Class="CRMS.Views.Support.TicketFiltersControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:metro="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
             xmlns:local="clr-namespace:CRMS.Views.Support"
             xmlns:viewModels="clr-namespace:CRMS.ViewModels.Support"
             xmlns:converters="clr-namespace:CRMS.Infrastructure.Converters"
             xmlns:domain="clr-namespace:CRMS.Domain.Entities;assembly=CRMS.Domain"
             mc:Ignorable="d"
             Background="Transparent"
             Height="Auto" Width="Auto">

    <UserControl.Resources>
        <converters:StatusToColorConverter x:Key="StatusToColorConverter"/>
        <converters:StatusToRussianConverter x:Key="StatusToRussianConverter"/>
        <converters:PriorityToRussianConverter x:Key="PriorityToRussianConverter"/>
        <converters:PriorityToColorConverter x:Key="PriorityToColorConverter"/>        

        <!-- Стиль для текста -->
        <Style TargetType="TextBlock" x:Key="CardTextStyle">
            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>
    </UserControl.Resources>

    <Border CornerRadius="8"
        BorderThickness="1"
        BorderBrush="{DynamicResource MaterialDesignDivider}"
        Background="Transparent"
        Padding="10">
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <TextBlock Grid.Row="0" Text="Фильтр по заявкам" FontSize="16" Margin="0,0,0,20" Foreground="White" FontWeight="Bold" HorizontalAlignment="Center"/>

            <!-- Статус -->
            <TextBlock Grid.Row="1" 
                       Text="Статус заявки:"
                       VerticalAlignment="Center" 
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="10,0,0,5"/>
            <ComboBox Grid.Row="2" 
                      materialDesign:HintAssist.Hint="Выберите статус заявки"          
                      ItemsSource="{Binding Statuses}" 
                      SelectedItem="{Binding SelectedStatus, Mode=TwoWay}"
                      Foreground="White"
                      Margin="0,0,10,0"
                      VerticalAlignment="Center"
                      Style="{StaticResource MaterialDesignOutlinedComboBox}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="4">
                            <Ellipse Width="12" Height="12" 
                                     Fill="{Binding Value, Converter={StaticResource StatusToColorConverter}}"
                                     Stroke="Black" StrokeThickness="0.5"
                                     Margin="0,0,6,0"/>
                            <TextBlock Text="{Binding Value, Converter={StaticResource StatusToRussianConverter}}" 
                                       Foreground="White"/>
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <!-- Приоритет -->
            <TextBlock Grid.Row="3" 
                       Text="Приоритет заявки:" 
                       VerticalAlignment="Center" 
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="10,20,0,5"/>
            <ComboBox Grid.Row="4" 
                      materialDesign:HintAssist.Hint="Выберите приоритет заявки"
                      ItemsSource="{Binding Priorities}"
                      SelectedItem="{Binding SelectedPriority, Mode=TwoWay}"
                      Foreground="White"
                      Margin="0,0,10,0"
                      VerticalAlignment="Center"
                      Style="{StaticResource MaterialDesignOutlinedComboBox}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="4">
                            <Rectangle Width="12" Height="12" 
                                       Fill="{Binding Value, Converter={StaticResource PriorityToColorConverter}}"
                                       Stroke="Black" StrokeThickness="0.5"
                                       Margin="0,0,6,0"/>
                            <TextBlock Text="{Binding Value, Converter={StaticResource PriorityToRussianConverter}}"
                                       Foreground="White"/>
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <!-- Очередь -->
            <TextBlock Grid.Row="5" 
                       Text="Тип запроса:"
                       VerticalAlignment="Center" 
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="10,20,0,5"/>
            <ComboBox Grid.Row="6" 
                      materialDesign:HintAssist.Hint="Выберите тип запроса"          
                      ItemsSource="{Binding Queues}" 
                      SelectedItem="{Binding SelectedQueue, Mode=TwoWay}"
                      Foreground="White"
                      Margin="0,0,10,0"
                      VerticalAlignment="Center"
                      Style="{StaticResource MaterialDesignOutlinedComboBox}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding DisplayName}" 
                       Foreground="White"/>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <!-- Заявитель -->
            <TextBlock Grid.Row="7" 
                       Text="Автор заявки:"
                       VerticalAlignment="Center" 
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="10,20,0,5"/>
            <ComboBox Grid.Row="8" 
                      materialDesign:HintAssist.Hint="Выберите автора заявки"          
                      ItemsSource="{Binding Creators}" 
                      SelectedItem="{Binding SelectedCreator, Mode=TwoWay}"
                      Foreground="White"
                      Margin="0,0,10,0"
                      VerticalAlignment="Center"
                      Style="{StaticResource MaterialDesignOutlinedComboBox}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding DisplayName}" 
                       Foreground="White"/>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
        </Grid>
    </Border>
</UserControl>